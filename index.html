<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Real8 시스템 체크</title>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
</head>
<body style="background-color: #121212; color: white; text-align: center; padding-top: 50px;">
    <h1>Real8 접속 테스트</h1>
    <p>아래 버튼을 누르면 구체적인 오류 원인을 알려줍니다.</p>
    <button onclick="checkLogin()" style="padding: 20px 40px; font-size: 20px; cursor: pointer;">인증 상태 확인</button>
    <div id="error-log" style="color: #ff6b6b; margin-top: 30px; font-weight: bold;"></div>

    <script>
        // 사진 35번과 38번을 대조하여 한 글자씩 직접 입력한 설정값입니다.
        const firebaseConfig = {
            apiKey: "AIzaSyDPDh41Coju7dojq3ATISTxJDIiypx8eA0",
            authDomain: "real8-platform-8527b.firebaseapp.com",
            projectId: "real8-platform-8527b",
            storageBucket: "real8-platform-8527b.appspot.com",
            messagingSenderId: "268345819156",
            appId: "1:268345819156:web:b017ad50d8d4e06f029001"
        };
        firebase.initializeApp(firebaseConfig);

        function checkLogin() {
            const provider = new firebase.auth.GoogleAuthProvider();
            const logDiv = document.getElementById('error-log');
            logDiv.innerText = "로그인 시도 중...";

            firebase.auth().signInWithPopup(provider).then((result) => {
                logDiv.style.color = "#4eff4e";
                logDiv.innerText = "성공했습니다! " + result.user.displayName + "님 환영합니다.";
            }).catch((error) => {
                // 어떤 문제가 있는지 정린님께 한글로 번역해서 알려줍니다.
                let message = "알 수 없는 오류";
                if(error.code === 'auth/api-key-not-valid') message = "1. API 키가 여전히 틀립니다. (번역기 문제일 확률 99%)";
                else if(error.code === 'auth/unauthorized-domain') message = "2. 구글 설정에서 이 사이트 주소를 허락하지 않았습니다.";
                else if(error.code === 'auth/popup-blocked') message = "3. 인터넷 팝업창이 차단되어 있습니다.";
                else message = "기타 오류: " + error.code;
                
                logDiv.innerText = "분석 결과: " + message;
                console.error(error);
            });
        }
    </script>
</body>
</html>
